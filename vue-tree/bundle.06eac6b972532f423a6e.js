!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=341)}({309:function(t,e,n){"use strict";n(327);var r=(n(59),n(319)),i=new Vue,o={name:"tree-nodes",template:n(333),props:{nodes:Array,parent:Object},methods:{add:function(){i.$emit("add",this.parent)},update:function(t){i.$emit("update",t)},remove:function(t){i.$emit("remove",t)},handleItemNameClick:function(t){t.$toggleExpand(),this.$forceUpdate()}}};Vue.component("tree",{template:'\n    <div class="tree">\n      <tree-nodes :nodes="nodes" :parent="root"/>\n    </div>\n  ',props:{data:Array},data:function(){return{lastData:null}},methods:{},computed:{root:function(){return{$root:!0,children:this.data}},nodes:function(){return(0,r.extendNode)(this.root,this.lastData),this.data}},components:{treeNodes:o},created:function(){var t=this;this.lastData=this.data,i.$on("add",function(e){t.$emit("add",e)}),i.$on("update",function(e){t.$emit("update",e)}),i.$on("remove",function(e){t.$emit("remove",e)})},beforeUpdate:function(){this.lastData=this.data}})},310:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=e;if(Array.isArray(e)&&(n={children:e}),n.id==t)return n;if(n.children){var r=!0,o=!1,a=void 0;try{for(var u,d=n.children[Symbol.iterator]();!(r=(u=d.next()).done);r=!0){var c=u.value,l=i(t,c);if(l)return l}}catch(t){o=!0,a=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw a}}}return!1}function o(t,e){var n=e;if(Array.isArray(e)&&(n={children:e}),n.children){var r=n.children.findIndex(function(e){return e.id==t});return r>=0?void n.children.splice(r,1):void n.children.map(function(e){return o(t,e)})}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=[{id:1,name:1,children:[{id:11,name:11},{id:12,name:12}]},{id:2,name:2,children:[{id:21,name:21},{id:22,name:22}]}],d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"MLX_DEMOS_TREE_DATA";r(this,t),this.key="",this.data=[],this.key=e,localStorage.getItem(this.key)||localStorage.setItem(this.key,JSON.stringify(u)),this.data=JSON.parse(localStorage.getItem(this.key))}return a(t,[{key:"_async",value:function(){localStorage.setItem(this.key,JSON.stringify(this.data,function(t,e){if(!/^\$/.test(t))return e})),this.data=JSON.parse(localStorage.getItem(this.key))}},{key:"reset",value:function(){this.data=u,this._async()}},{key:"add",value:function(t,e){if(t){t.id=Date.now();var n=e;if(e&&(n=i(e.id,this.data),!n))return console.error("parent node does not exists");n=n||{children:this.data},n.children=n.children||[],n.children.push(t),this._async()}}},{key:"update",value:function(t){if(t){var e=i(t.id,this.data);for(var n in t)e[n]=t[n];this._async()}}},{key:"remove",value:function(t){t&&(o(t.id,this.data),this._async())}},{key:"all",value:function(){return JSON.parse(JSON.stringify(this.data))}}]),t}();e.default=d},319:function(t,e,n){"use strict";function r(t,e){if(!e)return!1;var n=e;if(Array.isArray(e)&&(n={children:e}),n.id==t)return n;if(n.children){var i=!0,o=!1,a=void 0;try{for(var u,d=n.children[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var c=u.value,l=r(t,c);if(l)return l}}catch(t){o=!0,a=t}finally{try{!i&&d.return&&d.return()}finally{if(o)throw a}}}return!1}function i(t,e){var n=r(t.id,e);t.$expand=n&&n.$expand||!1,t.$hasChildren=function(){return Array.isArray(t.children)&&t.children.length>0},t.$toggleExpand=function(t){this.$expand=void 0===t?!this.$expand:t},t.$hasChildren()&&t.children.map(function(n){n.$parent=t,i(n,e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.extendNode=i},327:function(t,e){},333:function(t,e){t.exports='<ul :class="{expand: parent.$root}"> <li v-for="node in nodes"> <div> <span @click=handleItemNameClick(node)>{{node.name}}</span> <button @click=update(node)>~</button> <button @click=remove(node)>Ã—</button> </div> <tree-nodes :class="{expand: node.$expand}" :nodes=node.children :parent=node /> </li> <li> <button @click=add>+</button> </li> </ul>'},341:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(309);var i=n(59),o=n(310),a=r(o),u=new a.default;new Vue({el:"#app",data:function(){return{data:u.all()}},methods:{addTreeNode:function(t){var e=prompt("Enter a name");(0,i.isEmpty)(e)||(u.add({name:e},t),this.data=u.all())},updateTreeNode:function(t){var e=prompt("Enter a name",t.name);(0,i.isEmpty)(e)||(t.name=e,u.update(t),this.data=u.all())},removeTreeNode:function(t){u.remove(t),this.data=u.all()}}})},59:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.debounce=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=null;return function(){var r=this,i=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(r,i)},e)}},e.throttle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=arguments[2],r=0,i=null;return function(){var o=this,a=arguments;clearTimeout(i);var u=Date.now();u-r>e?(r=u,t.apply(this,arguments)):n&&(i=setTimeout(function(){r=u,t.apply(o,a)},e))}},e.isElementInViewPort=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},e.isEmpty=function(t){return void 0===t||(null===t||(""===t||("string"==typeof t?""===t.trim():"[object Array]"===Object.prototype.toString.call(t)?t.length<=0:t.constructor===Object&&Object.keys(t).length<=0)))},e.deepCopy=function(t){return"object"!==("undefined"==typeof t?"undefined":r(t))?t:(console.log(JSON.stringify(t)),JSON.parse(JSON.stringify(t)))}}});